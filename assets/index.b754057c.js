var K=Object.defineProperty;var D=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&y(e,r,t[r]);if(D)for(var r of D(t))O.call(t,r)&&y(e,r,t[r]);return e};import{l as g,E as U,e as p,R as M,U as P,M as k,a as I}from"./monaco.6907ec32.js";import{I as V,C as c,S as u,D as b,a as x}from"./yamlWorker.07b904b3.js";function H(e,t){let{createData:r,interval:o=3e4,label:s,moduleId:i,stopWhenIdleFor:l=12e4}=t,n,d,a=0,f=!1;const S=()=>{n&&(n.dispose(),n=void 0),d=void 0},A=setInterval(()=>{if(!n)return;Date.now()-a>l&&S()},o);return{dispose(){f=!0,clearInterval(A),S()},async getWorker(...v){if(f)throw new Error("Worker manager has been disposed");return a=Date.now(),d||(n=e.editor.createWebWorker({createData:r,label:s,moduleId:i}),d=n.getProxy()),await n.withSyncedResources(v),d},updateCreateData(v){r=v,S()}}}var m="yaml";function q(e){switch(e){case b.Error:return k.Error;case b.Warning:return k.Warning;case b.Information:return k.Info;case b.Hint:return k.Hint;default:return k.Info}}function _(e){switch(e){case x.Deprecated:return I.Deprecated;case x.Unnecessary:return I.Unnecessary}}function T(e){var t;return{severity:q(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,code:String(e.code),source:e.source,tags:(t=e.tags)==null?void 0:t.map(_)}}function j(e,t){const r=new Map,o=async n=>{(await e()).resetSchema(String(n))},s=async n=>{const f=(await(await e(n)).doValidation(String(n))).map(T),S=p.getModel(n);S&&S.getLanguageId()===m&&p.setModelMarkers(S,m,f)},i=n=>{if(n.getLanguageId()!==m)return;let d;r.set(String(n.uri),n.onDidChangeContent(()=>{clearTimeout(d),d=setTimeout(()=>s(n.uri),500)})),s(n.uri)},l=n=>{p.setModelMarkers(n,m,[]);const d=String(n.uri),a=r.get(d);a&&(a.dispose(),r.delete(d))};p.onDidCreateModel(i),p.onWillDisposeModel(n=>{l(n),o(n.uri)}),p.onDidChangeModelLanguage(n=>{l(n.model),i(n.model),o(n.model.uri)}),t.onDidChange(()=>{for(const n of p.getModels())n.getLanguageId()===m&&(l(n),i(n))});for(const n of p.getModels())i(n)}function h(e){if(!!e)return{character:e.column-1,line:e.lineNumber-1}}function w(e){if(!!e)return new M(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function E(e){return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}function z(e){return{message:e.message,range:E(e),code:typeof e.code=="object"?e.code.value:e.code,source:e.source}}function B(e){const t=g.CompletionItemKind;switch(e){case c.Text:return t.Text;case c.Method:return t.Method;case c.Function:return t.Function;case c.Constructor:return t.Constructor;case c.Field:return t.Field;case c.Variable:return t.Variable;case c.Class:return t.Class;case c.Interface:return t.Interface;case c.Module:return t.Module;case c.Property:return t.Property;case c.Unit:return t.Unit;case c.Value:return t.Value;case c.Enum:return t.Enum;case c.Keyword:return t.Keyword;case c.Snippet:return t.Snippet;case c.Color:return t.Color;case c.File:return t.File;case c.Reference:return t.Reference;default:return t.Property}}function R(e){if(!!e)return{range:w(e.range),text:e.newText}}function Y(e){return{triggerCharacters:[" ",":"],async provideCompletionItems(t,r){const o=t.uri,i=await(await e(o)).doComplete(String(o),h(r));if(!i)return;const l=t.getWordUntilPosition(r),n=new M(r.lineNumber,l.startColumn,r.lineNumber,l.endColumn),d=i.items.map(a=>{const f={label:a.label,insertText:a.insertText||a.label,sortText:a.sortText,filterText:a.filterText,documentation:a.documentation,detail:a.detail,kind:B(a.kind),range:n};return a.textEdit&&(f.range=w("range"in a.textEdit?a.textEdit.range:a.textEdit.replace),f.insertText=a.textEdit.newText),a.additionalTextEdits&&(f.additionalTextEdits=a.additionalTextEdits.map(R)),a.insertTextFormat===V.Snippet&&(f.insertTextRules=g.CompletionItemInsertTextRule.InsertAsSnippet),f});return{incomplete:i.isIncomplete,suggestions:d}}}}function $(e){return{async provideDefinition(t,r){const o=t.uri,i=await(await e(o)).doDefinition(String(o),h(r));return i==null?void 0:i.map(l=>({originSelectionRange:l.originSelectionRange,range:w(l.targetRange),targetSelectionRange:l.targetSelectionRange,uri:P.parse(l.targetUri)}))}}}function G(e){return{async provideHover(t,r){const o=t.uri,i=await(await e(o)).doHover(String(o),h(r));if(!!i)return{range:w(i.range),contents:[{value:i.contents.value}]}}}}function J(e){const t=g.SymbolKind;switch(e){case u.File:return t.Array;case u.Module:return t.Module;case u.Namespace:return t.Namespace;case u.Package:return t.Package;case u.Class:return t.Class;case u.Method:return t.Method;case u.Property:return t.Property;case u.Field:return t.Field;case u.Constructor:return t.Constructor;case u.Enum:return t.Enum;case u.Interface:return t.Interface;case u.Function:return t.Function;case u.Variable:return t.Variable;case u.Constant:return t.Constant;case u.String:return t.String;case u.Number:return t.Number;case u.Boolean:return t.Boolean;case u.Array:return t.Array;default:return t.Function}}function L(e){return{detail:e.detail||"",range:w(e.range),name:e.name,kind:J(e.kind),selectionRange:w(e.selectionRange),children:e.children.map(L),tags:[]}}function Q(e){return{async provideDocumentSymbols(t){const r=t.uri,s=await(await e(r)).findDocumentSymbols(String(r));if(!!s)return s.map(L)}}}function X(e){return C({tabSize:e.tabSize,insertSpaces:e.insertSpaces},e)}function Z(e){return{async provideDocumentFormattingEdits(t,r){const o=t.uri,i=await(await e(o)).format(String(o),X(r));if(!(!i||i.length===0))return i.map(R)}}}function ee(e){return{range:w(e.range),tooltip:e.tooltip,url:e.target}}function te(e){return{async provideLinks(t){const r=t.uri;return{links:(await(await e(r)).findLinks(String(r))).map(ee)}}}}function re(e){const t=[];for(const[r,o]of Object.entries(e.changes))for(const s of o)t.push({resource:P.parse(r),edit:{text:s.newText,range:w(s.range)}});return{edits:t}}function ne(e){var t;return{title:e.title,diagnostics:e.diagnostics.map(T),disabled:(t=e.disabled)==null?void 0:t.reason,edit:re(e.edit),kind:e.kind,isPreferred:e.isPreferred}}function oe(e){return{async provideCodeActions(t,r,o){const s=t.uri;return{actions:(await(await e(s)).getCodeAction(String(s),E(r),o.markers.map(z))).map(ne),dispose(){}}}}}var ae={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:g.IndentAction.Indent}}]};function ie(e){const t=H({editor:p},{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:{languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest}});e.onDidChange(()=>{t.updateCreateData({languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest})}),g.registerCompletionItemProvider(m,Y(t.getWorker)),g.registerHoverProvider(m,G(t.getWorker)),g.registerDefinitionProvider(m,$(t.getWorker)),g.registerDocumentSymbolProvider(m,Q(t.getWorker)),g.registerDocumentFormattingEditProvider(m,Z(t.getWorker)),g.registerLinkProvider(m,te(t.getWorker)),g.registerCodeActionProvider(m,oe(t.getWorker)),j(t.getWorker,e),g.setLanguageConfiguration(m,ae)}var F={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"};function se(e){const t=new U;let r=e;const o={get onDidChange(){return t.event},get diagnosticsOptions(){return r},setDiagnosticsOptions(s){r=C(C({},F),s),t.fire(o)}};return o}var W=se(F);g.register({id:m,extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});g.onLanguage("yaml",()=>{ie(W)});function de(e={}){W.setDiagnosticsOptions(e)}export{se as createLanguageServiceDefaults,de as setDiagnosticsOptions};
